<!DOCTYPE html>
<html lang="mn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="Content-Security-Policy"
    content="default-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' https://cdn.discordapp.com data:; connect-src 'self' http://localhost:3000 ws://localhost:3000 https://mongolian-warcraft-gaming-platform-production.up.railway.app wss://mongolian-warcraft-gaming-platform-production.up.railway.app;" />
  <title>Mongolian Warcraft Gaming Platform</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <!-- SVG icon —Ç–æ–¥–æ—Ä—Ö–æ–π–ª–æ–ª—Ç -->
  <svg class="hidden">
    <defs>
      <!-- –ì–∞—Ä–∞—Ö (logout) -->
      <symbol id="ico-logout" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
        <polyline points="16 17 21 12 16 7"/>
        <line x1="21" y1="12" x2="9" y2="12"/>
      </symbol>
      <!-- –ì–∞—Ä–∞—Ö (leave / back) -->
      <symbol id="ico-leave" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
        <path d="M15 3H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8"/>
        <polyline points="10 17 15 12 10 7"/>
        <line x1="15" y1="12" x2="3" y2="12"/>
      </symbol>
      <!-- –®–∏–Ω—ç—á–ª—ç—Ö (refresh) -->
      <symbol id="ico-refresh" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="23 4 23 10 17 10"/>
        <polyline points="1 20 1 14 7 14"/>
        <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/>
      </symbol>
      <!-- –ò–ª–≥—ç—ç—Ö (send / paper plane) -->
      <symbol id="ico-send" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="22" y1="2" x2="11" y2="13"/>
        <polygon points="22 2 15 22 11 13 2 9 22 2"/>
      </symbol>
      <!-- –¢–æ–≥–ª–æ–ª—Ç —ç—Ö–ª“Ø“Ø–ª—ç—Ö (play) -->
      <symbol id="ico-play" viewBox="0 0 24 24" fill="currentColor" stroke="none">
        <polygon points="5 3 19 12 5 21 5 3"/>
      </symbol>
      <!-- ”®—Ä”©”©–≥ —Ö–∞–∞—Ö (X close) -->
      <symbol id="ico-close" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round">
        <line x1="18" y1="6" x2="6" y2="18"/>
        <line x1="6" y1="6" x2="18" y2="18"/>
      </symbol>
      <!-- –ù–∞—Ä (light mode) -->
      <symbol id="ico-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="5"/>
        <line x1="12" y1="1" x2="12" y2="3"/>
        <line x1="12" y1="21" x2="12" y2="23"/>
        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
        <line x1="1" y1="12" x2="3" y2="12"/>
        <line x1="21" y1="12" x2="23" y2="12"/>
        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
      </symbol>
      <!-- –°–∞—Ä (dark mode) -->
      <symbol id="ico-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
      </symbol>
      <!-- + –ù—ç–º—ç—Ö -->
      <symbol id="ico-plus" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round">
        <line x1="12" y1="5" x2="12" y2="19"/>
        <line x1="5" y1="12" x2="19" y2="12"/>
      </symbol>
      <!-- –ù—ç–≥–¥—ç—Ö (join / log-in) -->
      <symbol id="ico-join" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
        <path d="M9 3H17a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H9"/>
        <polyline points="14 17 9 12 14 7"/>
        <line x1="9" y1="12" x2="21" y2="12"/>
      </symbol>
    </defs>
  </svg>

  <!-- ‚ë† –ù—ç–≤—Ç—Ä—ç—Ö / –ë“Ø—Ä—Ç–≥—ç–ª -->
  <div id="page-login" class="page active">
    <div class="login-box">
      <div class="login-logo">‚öîÔ∏è</div>
      <h1>Mongolian Warcraft Gaming Platform</h1>
      <p class="subtitle">–ú–æ–Ω–≥–æ–ª—ã–Ω WC3 &amp; DotA 1 —Ç–æ–≥–ª–æ–≥—á–¥—ã–Ω –ø–ª–∞—Ç—Ñ–æ—Ä–º</p>

      <div class="auth-tabs">
        <button type="button" class="auth-tab active" data-auth="login">–ù—ç–≤—Ç—Ä—ç—Ö</button>
        <button type="button" class="auth-tab" data-auth="register">–ë“Ø—Ä—Ç–≥“Ø“Ø–ª—ç—Ö</button>
      </div>

      <div id="auth-login" class="auth-form">
        <input id="login-email" type="email" placeholder="–ò–º—ç–π–ª —Ö–∞—è–≥" class="input" />
        <div class="input-pw-wrap">
          <input id="login-password" type="password" placeholder="–ù—É—É—Ü “Ø–≥" class="input" />
          <button type="button" class="btn-eye" data-target="login-password" title="–ù—É—É—Ü “Ø–≥ —Ö–∞—Ä–∞—Ö">üëÅ</button>
        </div>
        <p id="login-error" class="form-error"></p>
        <button type="button" id="btn-email-login" class="btn btn-primary btn-block">–ù—ç–≤—Ç—Ä—ç—Ö</button>
        <button type="button" id="btn-forgot-password" class="btn-link mt-4">–ù—É—É—Ü “Ø–≥—ç—ç –º–∞—Ä—Ç—Å–∞–Ω —É—É?</button>
        <div class="login-divider"><span>—ç—Å–≤—ç–ª</span></div>
        <button type="button" id="btn-login" class="btn btn-discord btn-block">Discord-—ç—ç—Ä –Ω—ç–≤—Ç—Ä—ç—Ö</button>
        <div class="qr-section">
          <p class="qr-label">–£—Ç–∞—Å–Ω—ã Discord –∞–ø–ø-–∞–∞—Ä —Å–∫–∞–Ω —Ö–∏–π–∂ –Ω—ç–≤—Ç—Ä—ç—Ö</p>
          <div class="qr-box">
            <img id="qr-img" src="" alt="QR" />
            <div id="qr-loading" class="qr-loading">–ê—á–∞–∞–ª–ª–∞–∂ –±–∞–π–Ω–∞...</div>
          </div>
          <button type="button" id="btn-refresh-qr" class="btn btn-sm btn-with-icon mt-8">
            <svg class="btn-icon-svg"><use href="#ico-refresh"/></svg>
            –®–∏–Ω—ç—á–ª—ç—Ö
          </button>
        </div>
      </div>

      <!-- –ù—É—É—Ü “Ø–≥ —Å—ç—Ä–≥—ç—ç—Ö form -->
      <div id="auth-forgot" class="auth-form hidden">
        <h3 class="mb-8">üîë –ù—É—É—Ü “Ø–≥ —Å—ç—Ä–≥—ç—ç—Ö</h3>
        <div id="forgot-step-1">
          <input id="forgot-email" type="email" placeholder="–ë“Ø—Ä—Ç–≥—ç–ª—Ç—ç–π –∏–º—ç–π–ª —Ö–∞—è–≥" class="input" />
          <p id="forgot-error" class="form-error"></p>
          <button type="button" id="btn-forgot-send" class="btn btn-primary btn-block mt-4">–ö–æ–¥ –∞–≤–∞—Ö</button>
        </div>
        <div id="forgot-step-2" class="hidden">
          <p class="hint mb-8">–î–æ–æ—Ä—Ö –∫–æ–¥—ã–≥ —Ö–∞–¥–≥–∞–ª–∂ –∞–≤–Ω–∞ —É—É:</p>
          <div id="forgot-token-display" class="reset-token-box"></div>
          <input id="forgot-token-input" type="text" placeholder="–î—ç—ç—Ä—Ö –∫–æ–¥—ã–≥ –æ—Ä—É—É–ª–Ω–∞ —É—É" class="input mt-8" />
          <div class="input-pw-wrap mt-4">
            <input id="forgot-new-password" type="password" placeholder="–®–∏–Ω—ç –Ω—É—É—Ü “Ø–≥ (6+ —Ç—ç–º–¥—ç–≥—Ç)" class="input" />
            <button type="button" class="btn-eye" data-target="forgot-new-password" title="–ù—É—É—Ü “Ø–≥ —Ö–∞—Ä–∞—Ö">üëÅ</button>
          </div>
          <p id="forgot-reset-error" class="form-error"></p>
          <button type="button" id="btn-forgot-reset" class="btn btn-primary btn-block mt-4">–ù—É—É—Ü “Ø–≥ —à–∏–Ω—ç—á–ª—ç—Ö</button>
        </div>
        <button type="button" id="btn-back-to-login" class="btn-link mt-8">‚Üê –ù—ç–≤—Ç—Ä—ç—Ö —Ö—É—É–¥–∞—Å —Ä—É—É –±—É—Ü–∞—Ö</button>
      </div>

      <div id="auth-register" class="auth-form hidden">
        <input id="reg-username" type="text"  placeholder="–•–æ—á –Ω—ç—Ä (Nickname)" class="input" />
        <input id="reg-email"    type="email" placeholder="–ò–º—ç–π–ª —Ö–∞—è–≥"         class="input" />
        <div class="input-pw-wrap">
          <input id="reg-password" type="password" placeholder="–ù—É—É—Ü “Ø–≥ (6+ —Ç—ç–º–¥—ç–≥—Ç)" class="input" />
          <button type="button" class="btn-eye" data-target="reg-password" title="–ù—É—É—Ü “Ø–≥ —Ö–∞—Ä–∞—Ö">üëÅ</button>
        </div>
        <div class="input-pw-wrap">
          <input id="reg-password-confirm" type="password" placeholder="–ù—É—É—Ü “Ø–≥ –¥–∞–≤—Ç–∞—Ö" class="input" />
          <button type="button" class="btn-eye" data-target="reg-password-confirm" title="–ù—É—É—Ü “Ø–≥ —Ö–∞—Ä–∞—Ö">üëÅ</button>
        </div>
        <p id="reg-error" class="form-error"></p>
        <button type="button" id="btn-register" class="btn btn-primary btn-block">–ë“Ø—Ä—Ç–≥“Ø“Ø–ª—ç—Ö</button>
        <div class="login-divider"><span>—ç—Å–≤—ç–ª</span></div>
        <button type="button" id="btn-discord-reg" class="btn btn-discord btn-block">Discord-—ç—ç—Ä –±“Ø—Ä—Ç–≥“Ø“Ø–ª—ç—Ö</button>
      </div>
    </div>
  </div>

  <!-- ‚ë° “Æ–Ω–¥—Å—ç–Ω —Ö—É—É–¥–∞—Å -->
  <div id="page-main" class="page">
    <header>
      <div class="logo">‚öîÔ∏è Mongolian Warcraft Gaming Platform</div>
      <nav>
        <button type="button" class="nav-btn active" data-tab="lobby">Lobby</button>
        <button type="button" class="nav-btn" data-tab="chat">
          üí¨ –ß–∞—Ç
          <span id="chat-badge" class="nav-badge hidden">0</span>
        </button>
        <button type="button" class="nav-btn" data-tab="ranking">Ranking</button>
        <button type="button" class="nav-btn" data-tab="discord">Discord</button>
        <button type="button" class="nav-btn" data-tab="profile">–ü—Ä–æ—Ñ–∞–π–ª</button>
        <button type="button" class="nav-btn" data-tab="settings">‚öôÔ∏è</button>
      </nav>
      <div class="header-right">
        <span id="connection-status" class="connection-status online">üü¢ –•–æ–ª–±–æ–≥–¥—Å–æ–Ω</span>
        <!-- Light / Dark toggle -->
        <button type="button" id="btn-theme" class="btn btn-icon-only" title="–•–∞—Ä–∞–∞–Ω—ã –≥–æ—Ä–∏–º —Å–æ–ª–∏—Ö">
          <svg class="btn-icon-svg" id="icon-sun"><use href="#ico-sun"/></svg>
          <svg class="btn-icon-svg" id="icon-moon"><use href="#ico-moon"/></svg>
        </button>
        <div class="user-info">
          <img id="user-avatar" src="" alt="" class="hidden" />
          <span id="user-name"></span>
          <button type="button" id="btn-logout" class="btn btn-icon-only btn-danger-soft" title="–ì–∞—Ä–∞—Ö">
            <svg class="btn-icon-svg"><use href="#ico-logout"/></svg>
          </button>
        </div>
      </div>
    </header>

    <!-- Lobby tab -->
    <div id="tab-lobby" class="tab active">
      <div class="tab-header">
        <h2>–ù—ç—ç–ª—Ç—Ç—ç–π ”©—Ä”©”©–Ω“Ø“Ø–¥</h2>
        <div class="online-bar">
          <span class="online-dot"></span>
          <span id="online-count">0</span> —Ç–æ–≥–ª–æ–≥—á –æ–Ω–ª–∞–π–Ω
          <span id="online-names" class="online-names"></span>
        </div>
        <div class="tab-actions">
          <button type="button" id="btn-refresh" class="btn btn-icon-only" title="–®–∏–Ω—ç—á–ª—ç—Ö">
            <svg class="btn-icon-svg"><use href="#ico-refresh"/></svg>
          </button>
          <button type="button" id="btn-quickmatch" class="btn btn-secondary btn-with-icon" title="–•—É—Ä–¥–∞–Ω —Ç–æ–≥–ª–æ–ª—Ç">
            ‚ö° –•—É—Ä–¥–∞–Ω
          </button>
          <button type="button" id="btn-create-room" class="btn btn-primary btn-with-icon">
            <svg class="btn-icon-svg"><use href="#ico-plus"/></svg>
            ”®—Ä”©”© “Ø“Ø—Å–≥—ç—Ö
          </button>
        </div>
      </div>

      <div id="create-room-form" class="card hidden">
        <h3>–®–∏–Ω—ç ”©—Ä”©”©</h3>
        <input id="room-name" type="text" placeholder="”®—Ä”©”©–Ω–∏–π –Ω—ç—Ä (–∂–∏—à: Battle #5)" class="input" />
        <select id="room-type" class="input" title="–¢–æ–≥–ª–æ–æ–º—ã–Ω —Ç”©—Ä”©–ª —Å–æ–Ω–≥–æ—Ö">
          <option value="">‚Äî –¢–æ–≥–ª–æ–æ–º —Å–æ–Ω–≥–æ–Ω–æ —É—É ‚Äî</option>
        </select>
        <input id="room-max" type="number" value="10" min="2" max="12" class="input" title="–¢–æ–≥–ª–æ–≥—á–¥—ã–Ω –¥—ç—ç–¥ —Ç–æ–æ" placeholder="–¢–æ–≥–ª–æ–≥—á–¥—ã–Ω –¥—ç—ç–¥ —Ç–æ–æ" />
        <div class="password-row">
          <label class="checkbox-label">
            <input id="room-has-password" type="checkbox" />
            <span>–ù—É—É—Ü “Ø–≥—Ç—ç–π ”©—Ä”©”©</span>
          </label>
          <input id="room-password" type="password" placeholder="”®—Ä”©”©–Ω–∏–π –Ω—É—É—Ü “Ø–≥" class="input hidden mt-6" />
        </div>
        <div class="form-actions">
          <button type="button" id="btn-submit-room" class="btn btn-primary">“Æ“Ø—Å–≥—ç—Ö</button>
          <button type="button" id="btn-cancel-room" class="btn">–ë–æ–ª–∏—Ö</button>
        </div>
      </div>

      <div class="rooms-section">
        <h3 class="section-title">üü¢ –ù—ç–≥–¥—ç–∂ –±–æ–ª–Ω–æ</h3>
        <div id="rooms-waiting" class="rooms-grid">
          <p class="empty-text">–ê—á–∞–∞–ª–ª–∞–∂ –±–∞–π–Ω–∞...</p>
        </div>
      </div>
      <div class="rooms-section">
        <h3 class="section-title">üî¥ –¢–æ–≥–ª–æ–ª—Ç —è–≤–∞–≥–¥–∞–∂ –±–∞–π–Ω–∞</h3>
        <div id="rooms-playing" class="rooms-grid">
          <p class="empty-text">–û–¥–æ–æ–≥–æ–æ—Ä —Ç–æ–≥–ª–æ–ª—Ç —è–≤–∞–≥–¥–∞—Ö–≥“Ø–π –±–∞–π–Ω–∞</p>
        </div>
      </div>
    </div>

    <!-- Chat tab -->
    <div id="tab-chat" class="tab">
      <div class="chat-tab-layout">
        <div class="lobby-chat-panel">
          <div class="lobby-chat-header">
            <span>üåê –ù–∏–π—Ç–∏–π–Ω —á–∞—Ç</span>
            <span class="hint text-xs">–ë“Ø—Ö –æ–Ω–ª–∞–π–Ω —Ö—ç—Ä—ç–≥–ª—ç–≥—á–∏–¥ —Ö–∞—Ä–Ω–∞</span>
          </div>
          <div id="lobby-chat-messages" class="lobby-chat-messages"></div>
          <div class="chat-input-row">
            <input id="lobby-chat-input" type="text" placeholder="–ù–∏–π—Ç—ç–¥ –º–µ—Å—Å–µ–∂ –±–∏—á–∏—Ö..." class="input" />
            <button type="button" id="btn-lobby-send" class="btn btn-primary btn-icon-only" title="–ò–ª–≥—ç—ç—Ö">
              <svg class="btn-icon-svg"><use href="#ico-send"/></svg>
            </button>
          </div>
        </div>
        <div class="dm-users-panel">
          <!-- Tabs -->
          <div class="dm-panel-tabs">
            <button type="button" class="dm-tab active" data-dm-tab="friends">
              –ù–∞–π–∑—É—É–¥
              <span id="pending-badge" class="dm-tab-badge hidden">0</span>
            </button>
            <button type="button" class="dm-tab" data-dm-tab="online">
              –û–Ω–ª–∞–π–Ω
              <span id="dm-online-badge" class="dm-tab-badge">0</span>
            </button>
            <button type="button" class="dm-tab" data-dm-tab="blocked">–•–∞–∞—Å–∞–Ω</button>
          </div>
          <!-- Friends tab content -->
          <div id="dm-tab-friends" class="dm-tab-content active">
            <div id="pending-requests-section" class="hidden">
              <div class="dm-section-label">üì® –•“Ø—Å—ç–ª—Ç“Ø“Ø–¥</div>
              <ul id="pending-requests-list" class="dm-users-list"></ul>
            </div>
            <div class="dm-section-label hidden" id="friends-online-label">üü¢ –û–Ω–ª–∞–π–Ω –Ω–∞–π–∑—É—É–¥</div>
            <ul id="friends-online-list" class="dm-users-list"></ul>
            <div class="dm-section-label hidden" id="friends-offline-label">‚ö´ –û—Ñ–ª–∞–π–Ω –Ω–∞–π–∑—É—É–¥</div>
            <ul id="friends-offline-list" class="dm-users-list"></ul>
            <p id="no-friends-text" class="empty-text pad-empty">–ù–∞–π–∑ –±–∞–π—Ö–≥“Ø–π –±–∞–π–Ω–∞</p>
          </div>
          <!-- Online tab content -->
          <div id="dm-tab-online" class="dm-tab-content">
            <div class="search-box">
              <input type="text" id="user-search-input" placeholder="–•—ç—Ä—ç–≥–ª—ç–≥—á —Ö–∞–π—Ö..." class="input input-sm" />
            </div>
            <div id="user-search-results"></div>
            <ul id="dm-users-list" class="dm-users-list">
              <li class="empty-text pad-list">–û–Ω–ª–∞–π–Ω —Ö—ç—Ä—ç–≥–ª—ç–≥—á –±–∞–π—Ö–≥“Ø–π</li>
            </ul>
          </div>
          <!-- Blocked tab content -->
          <div id="dm-tab-blocked" class="dm-tab-content">
            <ul id="blocked-users-list" class="dm-users-list">
              <li class="empty-text pad-list">–•–∞–∞—Å–∞–Ω —Ö—ç—Ä—ç–≥–ª—ç–≥—á –±–∞–π—Ö–≥“Ø–π</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- Ranking tab -->
    <div id="tab-ranking" class="tab">
      <div class="ranking-header">
        <h2>üèÜ –®–∏–ª–¥—ç–≥ —Ç–æ–≥–ª–æ–≥—á–∏–¥</h2>
        <div class="ranking-controls">
          <select id="ranking-sort" class="input input-sm" title="–≠—Ä—ç–º–±–ª—ç—Ö">
            <option value="wins">–•–æ–∂–ª–æ–æ—Ä</option>
            <option value="winrate">Win%-—ç—ç—Ä</option>
            <option value="total_games">–ù–∏–π—Ç —Ç–æ–≥–ª–æ–ª—Ç–æ–æ—Ä</option>
          </select>
        </div>
      </div>
      <table id="ranking-table">
        <thead>
          <tr><th>#</th><th>–¢–æ–≥–ª–æ–≥—á</th><th>–•–æ–∂–∏–ª</th><th>–•–æ–∂–∏–≥–¥–æ–ª</th><th>Win%</th></tr>
        </thead>
        <tbody id="ranking-body"></tbody>
      </table>
      <div id="ranking-pagination" class="pagination hidden"></div>
    </div>

    <!-- Profile tab -->
    <div id="tab-profile" class="tab">
      <div class="card profile-card">
        <div class="profile-avatar-wrap">
          <img id="profile-avatar" src="" alt="" />
          <button type="button" id="btn-upload-avatar" class="avatar-upload-btn" title="–ó—É—Ä–∞–≥ —Å–æ–ª–∏—Ö">üì∑</button>
        </div>
        <div class="username-edit-row">
          <h2 id="profile-name"></h2>
          <button type="button" id="btn-edit-username" class="btn btn-sm" title="Username ”©”©—Ä—á–ª”©—Ö">‚úèÔ∏è</button>
        </div>
        <div id="username-edit-form" class="hidden username-edit-form">
          <input id="username-input" type="text" placeholder="–®–∏–Ω—ç –Ω—ç—Ä (2-20 —Ç—ç–º–¥—ç–≥—Ç)" class="input input-sm" maxlength="20" />
          <button type="button" id="btn-username-save" class="btn btn-sm btn-primary">–•–∞–¥–≥–∞–ª–∞—Ö</button>
          <button type="button" id="btn-username-cancel" class="btn btn-sm">–¶—É—Ü–ª–∞—Ö</button>
        </div>
        <p id="username-edit-error" class="form-error"></p>
        <p id="profile-email" class="hint"></p>
        <div class="stats-row">
          <div class="stat"><span id="stat-wins">0</span><label>–•–æ–∂–∏–ª</label></div>
          <div class="stat"><span id="stat-losses">0</span><label>–•–æ–∂–∏–≥–¥–æ–ª</label></div>
          <div class="stat"><span id="stat-winrate">0%</span><label>Win rate</label></div>
        </div>
        <div id="discord-link-section" class="mt-16">
          <div id="discord-linked" class="discord-badge hidden">
            <span>‚úì Discord —Ö–æ–ª–±–æ–≥–¥—Å–æ–Ω</span>
            <span id="discord-username" class="hint"></span>
            <button type="button" id="btn-unlink-discord" class="btn btn-sm btn-danger-soft" title="Discord —Å–∞–ª–≥–∞—Ö">‚úï</button>
          </div>
          <button type="button" id="btn-link-discord" class="btn btn-discord hidden">Discord —Ö–æ–ª–±–æ—Ö</button>
        </div>
      </div>

      <div class="card mt-16">
        <h3>üìã –¢–æ–≥–ª–æ–æ–º—ã–Ω —Ç“Ø“Ø—Ö</h3>
        <table id="game-history-table">
          <thead>
            <tr><th>–û–≥–Ω–æ–æ</th><th>–¢”©—Ä”©–ª</th><th>”®—Ä”©”©</th><th>–ë–∞–≥</th><th>“Æ—Ä –¥“Ø–Ω</th><th>–•—É–≥–∞—Ü–∞–∞</th></tr>
          </thead>
          <tbody id="game-history-body">
            <tr><td colspan="6" class="empty-text">–ê—á–∞–∞–ª–ª–∞–∂ –±–∞–π–Ω–∞...</td></tr>
          </tbody>
        </table>
        <div id="game-history-pagination" class="pagination hidden"></div>
      </div>

      <div class="card mt-16">
        <h3>üîë –ù—É—É—Ü “Ø–≥ —Å–æ–ª–∏—Ö</h3>
        <div class="input-pw-wrap">
          <input id="old-password" type="password" placeholder="–•—É—É—á–∏–Ω –Ω—É—É—Ü “Ø–≥" class="input" />
          <button type="button" class="btn-eye" data-target="old-password" title="–ù—É—É—Ü “Ø–≥ —Ö–∞—Ä–∞—Ö">üëÅ</button>
        </div>
        <div class="input-pw-wrap">
          <input id="new-password" type="password" placeholder="–®–∏–Ω—ç –Ω—É—É—Ü “Ø–≥ (6+ —Ç—ç–º–¥—ç–≥—Ç)" class="input" />
          <button type="button" class="btn-eye" data-target="new-password" title="–ù—É—É—Ü “Ø–≥ —Ö–∞—Ä–∞—Ö">üëÅ</button>
        </div>
        <div class="input-pw-wrap">
          <input id="new-password-confirm" type="password" placeholder="–®–∏–Ω—ç –Ω—É—É—Ü “Ø–≥ –¥–∞–≤—Ç–∞—Ö" class="input" />
          <button type="button" class="btn-eye" data-target="new-password-confirm" title="–ù—É—É—Ü “Ø–≥ —Ö–∞—Ä–∞—Ö">üëÅ</button>
        </div>
        <p id="pw-change-error" class="form-error"></p>
        <p id="pw-change-success" class="form-success"></p>
        <button type="button" id="btn-change-password" class="btn btn-primary mt-8">–°–æ–ª–∏—Ö</button>
      </div>
    </div>

    <!-- Settings tab -->
    <div id="tab-settings" class="tab">
      <h2>‚öôÔ∏è –¢–æ—Ö–∏—Ä—É—É–ª–≥–∞</h2>
      <div class="card settings-card">
        <h3>üéÆ –¢–æ–≥–ª–æ–æ–º—É—É–¥</h3>
        <p class="hint">–¢–æ–≥–ª–æ–æ–º—ã–Ω exe —Ñ–∞–π–ª—É—É–¥–∞–∞ –Ω—ç–º–Ω—ç “Ø“Ø. ”®—Ä”©”© “Ø“Ø—Å–≥—ç—Ö–¥—ç—ç –∞–ª—å —Ç–æ–≥–ª–æ–æ–º–æ–æ—Ä —Ç–æ–≥–ª–æ—Ö–æ–æ —Å–æ–Ω–≥–æ–Ω–æ.</p>

        <!-- –¢–æ–≥–ª–æ–æ–º—É—É–¥—ã–Ω –∂–∞–≥—Å–∞–∞–ª—Ç -->
        <ul id="games-list" class="games-list"></ul>

        <button type="button" id="btn-add-game" class="btn btn-primary btn-with-icon mt-8">
          <svg class="btn-icon-svg"><use href="#ico-plus"/></svg>
          –¢–æ–≥–ª–æ–æ–º –Ω—ç–º—ç—Ö
        </button>
      </div>

      <div class="card settings-card mt-8">
        <h3>üîÑ –ü—Ä–æ–≥—Ä–∞–º—ã–Ω —à–∏–Ω—ç—á–ª—ç–ª</h3>
        <div class="update-header-row">
          <span class="hint hint-no-margin">–û–¥–æ–æ–≥–∏–π–Ω —Ö—É–≤–∏–ª–±–∞—Ä: <strong id="app-version">...</strong></span>
          <button type="button" id="btn-check-update" class="btn btn-primary btn-with-icon">
            <svg class="btn-icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23 4 23 10 17 10"/><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/></svg>
            –®–∏–Ω—ç—á–ª—ç–ª —à–∞–ª–≥–∞—Ö
          </button>
        </div>
        <p id="update-check-msg" class="hint mt-8"></p>
      </div>
    <!-- Discord Servers tab -->
    <div id="tab-discord" class="tab">
      <div class="tab-header">
        <h2>Discord –°–µ—Ä–≤–µ—Ä“Ø“Ø–¥</h2>
        <button type="button" id="btn-add-discord-server" class="btn btn-primary btn-with-icon">
          <svg class="btn-icon-svg"><use href="#ico-plus"/></svg>
          –°–µ—Ä–≤–µ—Ä –Ω—ç–º—ç—Ö
        </button>
      </div>

      <!-- –°–µ—Ä–≤–µ—Ä –Ω—ç–º—ç—Ö —Ñ–æ—Ä–º -->
      <div id="discord-server-form" class="card hidden" style="margin-bottom:16px">
        <h3 class="mb-8">–®–∏–Ω—ç Discord —Å–µ—Ä–≤–µ—Ä –Ω—ç–º—ç—Ö</h3>
        <input id="ds-name"        type="text" placeholder="–°–µ—Ä–≤–µ—Ä–∏–π–Ω –Ω—ç—Ä"           class="input" />
        <input id="ds-invite-url"  type="url"  placeholder="https://discord.gg/..."  class="input" />
        <input id="ds-description" type="text" placeholder="–¢–∞–π–ª–±–∞—Ä (–∑–∞–∞–≤–∞–ª –±–∏—à)"    class="input" />
        <p id="ds-form-error" class="form-error"></p>
        <div class="form-actions mt-8">
          <button type="button" id="btn-ds-submit" class="btn btn-primary">–ù—ç–º—ç—Ö</button>
          <button type="button" id="btn-ds-cancel"  class="btn">–ë–æ–ª–∏—Ö</button>
        </div>
      </div>

      <div id="discord-servers-list" class="rooms-grid">
        <p class="empty-text">–ê—á–∞–∞–ª–ª–∞–∂ –±–∞–π–Ω–∞...</p>
      </div>
    </div>
    </div>
  </div>

  <!-- ‚ë¢ ”®—Ä”©”©–Ω–∏–π –¥–æ—Ç–æ—Ä -->
  <div id="page-room" class="page">
    <div class="room-layout">
      <div class="chat-panel">
        <div class="room-header">
          <button type="button" id="btn-leave-room" class="btn btn-sm btn-danger">
            <svg class="btn-icon-svg icon-sm"><use href="#ico-leave"/></svg>
            –ì–∞—Ä–∞—Ö
          </button>
          <h2 id="room-title">”®—Ä”©”©</h2>
          <span id="room-badge" class="badge"></span>
        </div>
        <div id="chat-messages" class="chat-messages"></div>
        <div class="chat-input-row">
          <input id="chat-input" type="text" placeholder="–ú–µ—Å—Å–µ–∂ –±–∏—á–∏—Ö..." class="input" />
          <button type="button" id="btn-send" class="btn btn-primary btn-icon-only" title="–ò–ª–≥—ç—ç—Ö">
            <svg class="btn-icon-svg"><use href="#ico-send"/></svg>
          </button>
        </div>
      </div>

      <div class="side-panel">
        <div class="card">
          <h3>üë• –¢–æ–≥–ª–æ–≥—á–∏–¥ <span id="members-count" class="hint"></span></h3>
          <ul id="members-list" class="members-list"></ul>
        </div>
        <div class="card">
          <h3>üéÆ –¢–æ–≥–ª–æ–æ–º</h3>
          <p class="hint" id="room-info-text"></p>
          <div id="zt-info" class="hint">
            üåê ZeroTier: <code id="zt-network-id"></code>
          </div>
          <button type="button" id="btn-launch-wc3" class="btn btn-primary btn-block btn-with-icon">
            <svg class="btn-icon-svg"><use href="#ico-play"/></svg>
            <span>–¢–æ–≥–ª–æ–æ–º —ç—Ö–ª“Ø“Ø–ª—ç—Ö</span>
          </button>
          <button type="button" id="btn-close-room" class="btn btn-danger btn-block btn-with-icon mt-8">
            <svg class="btn-icon-svg"><use href="#ico-close"/></svg>
            ”®—Ä”©”©–≥ —Ö–∞–∞—Ö
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- –ù—É—É—Ü “Ø–≥ modal -->
  <div id="password-modal" class="modal hidden">
    <div class="modal-box">
      <h2>üîí –ù—É—É—Ü “Ø–≥—Ç—ç–π ”©—Ä”©”©</h2>
      <p>–≠–Ω—ç ”©—Ä”©”©–Ω–¥ –Ω—ç–≤—Ç—Ä—ç—Ö–∏–π–Ω —Ç—É–ª–¥ –Ω—É—É—Ü “Ø–≥–∏–π–≥ –æ—Ä—É—É–ª–Ω–∞ —É—É</p>
      <input id="join-password" type="password" placeholder="–ù—É—É—Ü “Ø–≥" class="input mb-12" />
      <p id="join-password-error" class="form-error"></p>
      <div class="flex-center">
        <button type="button" id="btn-join-confirm" class="btn btn-primary">–ù—ç–≥–¥—ç—Ö</button>
        <button type="button" id="btn-join-cancel"  class="btn">–ë–æ–ª–∏—Ö</button>
      </div>
    </div>
  </div>

  <!-- –¢–æ–≥–ª–æ–æ–º –¥—É—É—Å–∞—Ö -->
  <div id="result-modal" class="modal hidden">
    <div class="modal-box">
      <h2>üèÜ –¢–æ–≥–ª–æ–æ–º –¥—É—É—Å–ª–∞–∞!</h2>
      <p id="result-text"></p>
      <button type="button" id="btn-close-result" class="btn btn-primary">–•–∞–∞—Ö</button>
    </div>
  </div>

  <!-- Private –º–µ—Å—Å–µ–∂ (DM) modal -->
  <div id="dm-modal" class="modal hidden">
    <div class="modal-box dm-modal-box">
      <div class="dm-header">
        <h3 id="dm-title">üîí Private —á–∞—Ç</h3>
        <button type="button" id="btn-close-dm" class="btn btn-icon-only btn-sm" title="–•–∞–∞—Ö">
          <svg class="btn-icon-svg"><use href="#ico-close"/></svg>
        </button>
      </div>
      <div id="dm-messages" class="dm-messages"></div>
      <div id="dm-typing-indicator" class="typing-indicator"></div>
      <div class="chat-input-row dm-input-row">
        <input id="dm-input" type="text" placeholder="–•—É–≤–∏–π–Ω –º–µ—Å—Å–µ–∂..." class="input" />
        <button type="button" id="btn-dm-send" class="btn btn-primary btn-icon-only" title="–ò–ª–≥—ç—ç—Ö">
          <svg class="btn-icon-svg"><use href="#ico-send"/></svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Confirm modal -->
  <div id="confirm-modal" class="confirm-overlay">
    <div class="confirm-box">
      <h3 id="confirm-title">–ë–∞—Ç–∞–ª–≥–∞–∞–∂—É—É–ª–∞—Ö</h3>
      <p id="confirm-message"></p>
      <div class="confirm-actions">
        <button type="button" id="confirm-cancel" class="btn">–¶—É—Ü–ª–∞—Ö</button>
        <button type="button" id="confirm-ok" class="btn btn-danger">–¢–∏–π–º</button>
      </div>
    </div>
  </div>

  <!-- –•—ç—Ä—ç–≥–ª—ç–≥—á–∏–π–Ω –ø—Ä–æ—Ñ–∞–π–ª popup modal -->
  <div id="user-profile-modal" class="modal hidden">
    <div class="modal-box user-profile-box">
      <button type="button" id="btn-close-user-profile" class="btn btn-icon-only btn-sm modal-close-btn" title="–•–∞–∞—Ö">‚úï</button>
      <div class="profile-popup-header">
        <img id="popup-avatar" src="" alt="" class="popup-avatar" />
        <div>
          <h3 id="popup-username"></h3>
          <div class="stats-row-sm">
            <span id="popup-wins" class="stat-win">0 —Ö–æ–∂–∏–ª</span>
            <span id="popup-losses" class="stat-loss">0 —Ö–æ–∂–∏–≥–¥–æ–ª</span>
            <span id="popup-winrate">0%</span>
          </div>
        </div>
      </div>
      <h4 class="mt-8">–°“Ø“Ø–ª–∏–π–Ω 5 —Ç–æ–≥–ª–æ–æ–º</h4>
      <table id="popup-history-table" class="history-table-sm">
        <thead><tr><th>–û–≥–Ω–æ–æ</th><th>–ë–∞–≥</th><th>“Æ—Ä –¥“Ø–Ω</th></tr></thead>
        <tbody id="popup-history-body"></tbody>
      </table>
      <div id="popup-friend-btn-wrap" class="mt-8"></div>
    </div>
  </div>

  <script src="socket.io.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
